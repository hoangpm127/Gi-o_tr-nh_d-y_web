<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Buổi 1 — Web Builder Foundation</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet"/>
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{--dark:#09090f;--surface:#13132a;--border:rgba(255,255,255,.09);--muted:#666688}
html,body{width:100%;height:100%;overflow:hidden;background:var(--dark);font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Helvetica Neue',Arial,'Noto Sans',sans-serif;color:#e0e0f0}
/* deck */
#deck{position:fixed;inset:0;bottom:80px}
.slide{position:absolute;inset:0;opacity:0;pointer-events:none;transition:opacity .4s ease,transform .4s ease;transform:translateX(30px)}
.slide.active{opacity:1;pointer-events:auto;transform:translateX(0)}
.slide.out{opacity:0;transform:translateX(-30px);pointer-events:none}
.bg-img{position:absolute;inset:0;background-size:cover;background-position:center;filter:brightness(.25) saturate(.6)}
.bg-color{position:absolute;inset:0}
.content{position:relative;z-index:2;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:48px 80px;text-align:center}
.stag{display:inline-block;padding:5px 18px;border-radius:8px;font-size:.72rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:20px;border:1px solid}
h1.huge{font-size:clamp(2.4rem,5vw,4.4rem);font-weight:900;line-height:1.1;color:#fff}
h2.big{font-size:clamp(1.6rem,3.2vw,2.8rem);font-weight:900;line-height:1.15;color:#fff;max-width:860px}
.sub{font-size:clamp(.9rem,1.55vw,1.12rem);color:rgba(255,255,255,.55);margin-top:14px;line-height:1.75;max-width:700px}
.sub strong{color:rgba(255,255,255,.88)}
.rule{width:52px;height:4px;border-radius:2px;margin:18px auto}
.cards{display:flex;gap:16px;margin-top:30px;flex-wrap:wrap;justify-content:center;width:100%;max-width:900px}
.card{flex:1;min-width:180px;padding:20px;border-radius:14px;text-align:left}
.card-icon{font-size:1.8rem;margin-bottom:10px}
.card-title{font-weight:800;font-size:1rem;margin-bottom:6px}
.card-body{font-size:.83rem;line-height:1.65;color:rgba(255,255,255,.6)}
.list-rows{display:flex;flex-direction:column;gap:0;width:100%;max-width:600px;margin-top:24px}
.list-row{display:flex;align-items:flex-start;gap:14px;padding:13px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:.92rem;color:rgba(255,255,255,.8)}
.list-row:last-child{border-bottom:none}
.dot{width:13px;height:13px;border-radius:50%;flex-shrink:0;margin-top:4px}
.compare{display:grid;grid-template-columns:1fr 1fr;gap:16px;width:100%;max-width:880px;margin-top:26px}
.compare-box{border-radius:14px;padding:22px;text-align:left}
.compare-label{font-size:.68rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:10px}
.compare-text{font-size:.88rem;line-height:1.7;color:rgba(255,255,255,.75)}
/* Q overlay */
#q-panel{
  position:fixed;inset:0;bottom:80px;z-index:500;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:32px 48px;
  background:rgba(9,9,15,.95);
  backdrop-filter:blur(20px);
  opacity:0;pointer-events:none;transition:opacity .35s ease;
}
#q-panel.show{opacity:1;pointer-events:auto}
#q-text{font-size:clamp(1.1rem,2.2vw,1.6rem);font-weight:800;color:#fff;max-width:820px;text-align:center;line-height:1.4;margin-bottom:28px}
#q-opts{display:flex;flex-direction:column;gap:11px;width:100%;max-width:720px}
.q-opt{
  background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);
  border-radius:12px;padding:14px 20px;text-align:left;cursor:pointer;
  font-size:.93rem;color:rgba(255,255,255,.8);line-height:1.5;
  transition:background .15s,border-color .15s,transform .12s;
  display:flex;align-items:flex-start;gap:12px;
}
.q-opt:hover:not(:disabled){background:rgba(255,255,255,.09);border-color:rgba(255,255,255,.2);transform:translateX(3px)}
.opt-num{min-width:26px;height:26px;border-radius:7px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.15);display:flex;align-items:center;justify-content:center;font-size:.78rem;font-weight:700;color:rgba(255,255,255,.5);flex-shrink:0;margin-top:1px}
.q-opt.correct{background:rgba(6,214,160,.13);border-color:rgba(6,214,160,.45)}
.q-opt.correct .opt-num{background:#06d6a0;color:#0a1a0a;border-color:#06d6a0}
.q-opt.wrong{background:rgba(239,68,68,.1);border-color:rgba(239,68,68,.3)}
.q-opt.wrong .opt-num{background:rgba(239,68,68,.6);color:#fff;border-color:transparent}
.q-opt:disabled{cursor:default}
#q-countdown{display:none;margin-top:16px;font-size:.84rem;font-weight:700;color:#a5b4fc;text-align:center}
.q-cbar-wrap{width:100%;max-width:720px;height:3px;background:rgba(255,255,255,.07);border-radius:2px;margin-top:8px;overflow:hidden;display:none}
.q-cbar-fill{height:100%;background:#6c63ff;width:100%;transition:none}
#q-feedback{max-width:720px;width:100%;margin-top:16px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:14px 18px;font-size:.88rem;line-height:1.65;color:rgba(255,255,255,.78);display:none;text-align:left}
#q-feedback.show{display:block}
#q-continue{margin-top:18px;padding:11px 32px;border-radius:10px;border:none;cursor:pointer;font-size:.9rem;font-weight:700;letter-spacing:.3px;display:none;transition:opacity .2s,transform .2s}
#q-continue.show{display:inline-flex;align-items:center;gap:8px}
#q-continue:hover{opacity:.85;transform:translateY(-1px)}
/* bar */
#bar{position:fixed;bottom:0;left:0;right:0;height:80px;z-index:400;background:rgba(9,9,15,.93);backdrop-filter:blur(14px);border-top:1px solid var(--border);display:flex;align-items:center}
#prog{position:fixed;top:0;left:0;height:3px;z-index:600;transition:width .35s,background .35s}
#nav-prev,#nav-next{position:fixed;top:calc(50% - 40px);width:44px;height:44px;border-radius:50%;border:none;cursor:pointer;background:rgba(255,255,255,.07);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;transition:background .18s;z-index:300}
#nav-prev:hover,#nav-next:hover{background:rgba(255,255,255,.16)}
#nav-prev{left:16px}#nav-next{right:16px}
#bar-left{display:flex;align-items:center;gap:10px;padding:0 20px;flex-shrink:0}
#bar-center{flex:1;display:flex;align-items:center;padding:0 8px;overflow:hidden}
#bar-right{display:flex;align-items:center;gap:8px;padding:0 18px;flex-shrink:0}
#v-script{font-size:.79rem;color:rgba(255,255,255,.4);line-height:1.45;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-style:italic}
.b-btn{width:38px;height:38px;border-radius:50%;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .18s;flex-shrink:0}
#v-play{background:rgba(108,99,255,.22);border:1px solid rgba(108,99,255,.4)}
#v-play:hover{background:rgba(108,99,255,.38)}
#v-play.playing{background:rgba(239,68,68,.22);border-color:rgba(239,68,68,.4)}
#v-auto{padding:0 12px;width:auto;border-radius:8px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);font-size:.72rem;font-weight:700;color:rgba(255,255,255,.42);letter-spacing:.8px}
#v-auto.on{background:rgba(108,99,255,.25);border-color:rgba(108,99,255,.5);color:#a5b4fc}
#settings-btn{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1)}
#settings-btn:hover{background:rgba(255,255,255,.12)}
#settings-panel{position:fixed;bottom:88px;right:14px;z-index:700;width:340px;background:#13132a;border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:20px;box-shadow:0 8px 40px rgba(0,0,0,.6);display:none}
#settings-panel.open{display:block}
.s-label{font-size:.72rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--muted);margin-bottom:6px;display:block;margin-top:14px}
.s-label:first-child{margin-top:0}
.s-input{width:100%;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:9px 12px;color:#fff;font-size:.87rem;outline:none;font-family:inherit}
.s-input:focus{border-color:rgba(108,99,255,.6)}
.s-select{width:100%;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:9px 12px;color:#fff;font-size:.87rem;outline:none;font-family:inherit;cursor:pointer}
.s-row{display:flex;gap:8px;margin-top:12px}
.s-save{flex:1;padding:9px;border-radius:8px;border:none;background:#6c63ff;color:#fff;font-size:.87rem;font-weight:700;cursor:pointer;transition:opacity .2s}
.s-save:hover{opacity:.85}
.s-title{font-weight:800;color:#fff;margin-bottom:2px}
.s-close{float:right;background:none;border:none;color:var(--muted);cursor:pointer;font-size:1.1rem}
#counter{font-size:.74rem;color:rgba(255,255,255,.22);font-weight:600;flex-shrink:0;white-space:nowrap}
#hint{position:fixed;bottom:92px;left:50%;transform:translateX(-50%);color:rgba(255,255,255,.16);font-size:.69rem;letter-spacing:.8px;z-index:300;pointer-events:none;transition:opacity .8s;white-space:nowrap}
#vl{position:absolute;top:0;left:0;height:2px;background:#6c63ff;transition:width .3s linear;z-index:1}
</style>
</head>
<body>

<div id="prog"></div>
<div id="hint">← → chuyển slide · V = đọc · A = AUTO · Space = tiếp</div>
<div id="deck"></div>

<div id="q-panel">
  <div id="q-text"></div>
  <div id="q-opts"></div>
  <div id="q-countdown"></div>
  <div class="q-cbar-wrap" id="q-cbar-wrap"><div class="q-cbar-fill" id="q-cbar-fill"></div></div>
  <div id="q-feedback"></div>
  <button id="q-continue">Tiếp tục <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round"><polyline points="9 6 15 12 9 18"/></svg></button>
</div>

<button id="nav-prev"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round"><polyline points="15 18 9 12 15 6"/></svg></button>
<button id="nav-next"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round"><polyline points="9 6 15 12 9 18"/></svg></button>

<div id="bar">
  <div id="vl"></div>
  <div id="bar-left">
    <button class="b-btn" id="v-play" title="Đọc thuyết minh (V)">
      <svg id="ico-play" width="16" height="16" viewBox="0 0 24 24" fill="rgba(255,255,255,.9)"><polygon points="5 3 19 12 5 21 5 3"/></svg>
      <svg id="ico-pause" width="16" height="16" viewBox="0 0 24 24" fill="rgba(255,255,255,.9)" style="display:none"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
    </button>
    <button class="b-btn" id="v-auto">AUTO</button>
  </div>
  <div id="bar-center"><span id="v-script">Nhấn ▶ để nghe · AUTO để AI tự dạy hoàn toàn</span></div>
  <div id="bar-right">
    <span id="counter"></span>
    <button class="b-btn" id="settings-btn" title="Cài đặt giọng">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,.48)" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
    </button>
  </div>
</div>

<div id="settings-panel">
  <div><span class="s-title">Cài đặt giọng nói</span><button class="s-close" id="s-close">✕</button></div>
  <div style="display:flex;align-items:center;gap:10px;margin:14px 0;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:9px;padding:12px 14px">
    <div style="width:10px;height:10px;border-radius:50%;background:#22c55e;box-shadow:0 0 8px #22c55e;flex-shrink:0"></div>
    <div>
      <div style="font-weight:700;color:#fff;font-size:.9rem">Ban Mai — FPT.AI</div>
      <div style="font-size:.74rem;color:var(--muted);margin-top:2px">Giọng nữ, Hà Nội · Cài sẵn</div>
    </div>
  </div>
  <span class="s-label">Tốc độ đọc</span>
  <input class="s-input" id="s-rate" type="range" min="0.6" max="1.4" step="0.05" value="0.9" style="padding:6px 0;cursor:pointer;accent-color:#6c63ff"/>
  <div style="font-size:.77rem;color:var(--muted);margin-top:3px;display:flex;justify-content:space-between">
    <span>Chậm</span><span id="s-rate-val" style="color:#6c63ff;font-weight:700">0.9×</span><span>Nhanh</span>
  </div>
  <div class="s-row">
    <button class="s-save" id="s-save">Lưu &amp; Đóng</button>
    <button class="s-save" id="s-test" style="background:rgba(255,255,255,.11)">Test giọng</button>
  </div>
</div>

<script>
const SLIDES = [{"type":"teach","color":"#6c63ff","narration":"Chào mừng bạn đến với Buổi 1 của Web Builder Foundation. Hôm nay chúng ta sẽ trả lời 1 câu hỏi thôi: Web thực ra là gì? Và cuối buổi, bạn sẽ có giao diện Ứng dụng Quản Lý Công Việc đầu tiên của mình — được tạo bằng AI.","html":"<div class=\"bg-img\" style=\"background-image:url('https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&w=1600&q=80')\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"color:#a5b4fc;border-color:rgba(108,99,255,.5);background:rgba(108,99,255,.18)\">Buổi 1 · 2 tiếng</div>\n<h1 class=\"huge\">Web là gì?</h1>\n<div class=\"rule\" style=\"background:#6c63ff\"></div>\n<p class=\"sub\">Build giao diện Ứng dụng Quản Lý Công Việc đầu tiên · AI-Supported</p></div>"},{"type":"question","color":"#6c63ff","narration":"Trước khi tôi nói bất cứ điều gì, tôi muốn nghe câu trả lời của bạn. Theo bạn, khi bạn mở Facebook lên, thứ gì đang chạy phía sau? Web được tạo từ những gì? Chọn câu trả lời gần đúng nhất với suy nghĩ của bạn.","question":"Theo bạn, 1 trang web được tạo từ những gì?","options":[{"text":"HTML và CSS — giao diện thôi","correct":false,"feedback":"Đúng một phần! HTML và CSS tạo ra giao diện. Nhưng nếu chỉ có giao diện, bạn không thể thêm task, ô nhập, hay lưu dữ liệu. Còn thiếu Logic và Data."},{"text":"Code — JavaScript, Python...","correct":false,"feedback":"Code là Logic — bạn đúng khi nghĩ đến đây! Nhưng Logic mà không có UI thì người dùng không thấy gì, và không có Data thì không lưu được gì."},{"text":"Không biết, lần đầu học","correct":false,"feedback":"Hoàn toàn bình thường! Đó là lý do bạn ở đây. Câu trả lời thật ra rất gọn: Web = UI + Logic + Data. Tôi sẽ ô tích ngay bây giờ."},{"text":"Kết hợp: giao diện + xử lý + dữ liệu","correct":true,"feedback":"Chính xác! Bạn đã có trực giác rất đúng. Web = UI (giao diện) + Logic (xử lý) + Data (dữ liệu). Đây là Mental Model số 1 của khóa học."}]},{"type":"teach","color":"#6c63ff","narration":"Mọi website — từ đơn giản nhất đến Facebook hay Shopee — đều được tạo từ đúng 3 thứ. Thứ nhất là UI — giao diện, thứ người dùng thấy và chạm vào. Thứ hai là Logic — code xử lý nghiệp vụ, chạy phía sau. Thứ ba là Data — dữ liệu được lưu trữ. Thiếu 1 trong 3 thì không thành hệ thống thật sự. Đây là thứ quan trọng nhất hôm nay.","html":"<div class=\"bg-color\" style=\"background:#0a0a18\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"color:#a5b4fc;border-color:rgba(108,99,255,.5);background:rgba(108,99,255,.18)\">Mental Model #1</div>\n<h2 class=\"big\">Web = UI + Logic + Data</h2>\n<div class=\"rule\" style=\"background:#6c63ff\"></div>\n<div class=\"diagram\">\n  <div class=\"dbox\" style=\"background:rgba(108,99,255,.2);border:1px solid rgba(108,99,255,.5)\">\n    <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#a5b4fc\" stroke-width=\"1.8\" stroke-linecap=\"round\" style=\"display:block;margin:0 auto 8px\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"3\"/><line x1=\"3\" y1=\"9\" x2=\"21\" y2=\"9\"/><line x1=\"9\" y1=\"21\" x2=\"9\" y2=\"9\"/></svg>\n    <div style=\"font-weight:800;color:#c4b5fd\">UI</div><div style=\"font-size:.78rem;color:rgba(255,255,255,.5);margin-top:3px\">Giao diện</div>\n  </div>\n  <div style=\"color:rgba(255,255,255,.2);font-size:2rem\">+</div>\n  <div class=\"dbox\" style=\"background:rgba(255,209,102,.12);border:1px solid rgba(255,209,102,.35)\">\n    <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#fcd34d\" stroke-width=\"1.8\" stroke-linecap=\"round\" style=\"display:block;margin:0 auto 8px\"><polyline points=\"16 18 22 12 16 6\"/><polyline points=\"8 6 2 12 8 18\"/></svg>\n    <div style=\"font-weight:800;color:#fcd34d\">Logic</div><div style=\"font-size:.78rem;color:rgba(255,255,255,.5);margin-top:3px\">Xử lý</div>\n  </div>\n  <div style=\"color:rgba(255,255,255,.2);font-size:2rem\">+</div>\n  <div class=\"dbox\" style=\"background:rgba(6,214,160,.12);border:1px solid rgba(6,214,160,.35)\">\n    <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#6ee7b7\" stroke-width=\"1.8\" stroke-linecap=\"round\" style=\"display:block;margin:0 auto 8px\"><ellipse cx=\"12\" cy=\"5\" rx=\"9\" ry=\"3\"/><path d=\"M3 5v14a9 3 0 0018 0V5\"/><path d=\"M3 12a9 3 0 0018 0\"/></svg>\n    <div style=\"font-weight:800;color:#6ee7b7\">Data</div><div style=\"font-size:.78rem;color:rgba(255,255,255,.5);margin-top:3px\">Dữ liệu</div>\n  </div>\n</div>\n<p class=\"sub\" style=\"margin-top:24px\">Thiếu 1 trong 3 → không thành <strong>hệ thống thật sự</strong></p></div>"},{"type":"teach","color":"#6c63ff","narration":"Lấy ví dụ Shopee. UI là trang sản phẩm, giỏ hàng, trang thanh toán — thứ bạn nhìn thấy. Logic là kiểm tra tồn kho, tính giá giảm, xử lý đơn hàng — chạy phía sau. Data là toàn bộ thông tin: sản phẩm, tài khoản, lịch sử đơn hàng — được lưu vào database. Bây giờ tôi sẽ hỏi bạn một câu để kiểm tra bạn đã hiểu chưa.","html":"<div class=\"bg-img\" style=\"background-image:url('https://images.unsplash.com/photo-1563013544-824ae1b704d3?auto=format&fit=crop&w=1600&q=80')\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"background:rgba(0,0,0,.5);color:#a5b4fc;border-color:rgba(108,99,255,.4)\">Ví dụ: Shopee</div>\n<h2 class=\"big\">3 tầng của Shopee</h2>\n<div class=\"rule\" style=\"background:#6c63ff\"></div>\n<div style=\"display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px;margin-top:28px;width:100%;max-width:800px\">\n  <div style=\"background:rgba(0,0,0,.55);border-left:3px solid #6c63ff;border-radius:10px;padding:16px;backdrop-filter:blur(10px)\">\n    <div style=\"font-weight:800;color:#a5b4fc;margin-bottom:8px\">UI</div>\n    <div style=\"font-size:.83rem;color:rgba(255,255,255,.65);line-height:1.8\">Trang sản phẩm<br/>Giỏ hàng<br/>Trang thanh toán</div>\n  </div>\n  <div style=\"background:rgba(0,0,0,.55);border-left:3px solid #fcd34d;border-radius:10px;padding:16px;backdrop-filter:blur(10px)\">\n    <div style=\"font-weight:800;color:#fcd34d;margin-bottom:8px\">Logic</div>\n    <div style=\"font-size:.83rem;color:rgba(255,255,255,.65);line-height:1.8\">Kiểm tra tồn kho<br/>Tính giá & KM<br/>Xử lý thanh toán</div>\n  </div>\n  <div style=\"background:rgba(0,0,0,.55);border-left:3px solid #6ee7b7;border-radius:10px;padding:16px;backdrop-filter:blur(10px)\">\n    <div style=\"font-weight:800;color:#6ee7b7;margin-bottom:8px\">Data</div>\n    <div style=\"font-size:.83rem;color:rgba(255,255,255,.65);line-height:1.8\">Sản phẩm & kho<br/>Tài khoản user<br/>Lịch sử đơn hàng</div>\n  </div>\n</div></div>"},{"type":"question","color":"#f77f00","narration":"Câu hỏi kiểm tra: Nếu Shopee có UI đẹp và Data đầy đủ, nhưng không có Logic — điều gì sẽ xảy ra?","question":"Shopee có UI đẹp + Data đầy đủ, nhưng KHÔNG CÓ Logic. Điều gì xảy ra?","options":[{"text":"Trang web vẫn chạy bình thường","correct":false,"feedback":"Không đúng. Logic là phần xử lý tất cả hành động: kiểm tra tồn kho, tính giá, duyệt đơn hàng. Thiếu Logic, mọi thứ đứng im."},{"text":"Chỉ xem được sản phẩm, không mua được","correct":true,"feedback":"Chính xác! Bạn thấy giao diện đẹp, dữ liệu sản phẩm hiển thị — nhưng khi bấm \"Mua ngay\", không có Logic nào xử lý → không có gì xảy ra. Đây chính xác là tình trạng của giao diện bạn sẽ làm hôm nay — và buổi 2 sẽ fix điều này."},{"text":"Data sẽ bị mất hết","correct":false,"feedback":"Không. Data nằm riêng trong database, không liên quan đến Logic có tồn tại hay không. Thiếu Logic thì Data vẫn ở đó, chỉ là không ai đọc được nó đúng cách."},{"text":"UI sẽ bị hỏng, trắng trang","correct":false,"feedback":"Không đúng. UI là lớp hiển thị độc lập. Thiếu Logic thì UI vẫn hiển thị được — chỉ là không có gì hoạt động khi bạn click."}]},{"type":"teach","color":"#6c63ff","narration":"Vậy hôm nay chúng ta build cái gì? Chúng ta sẽ build tầng UI — giao diện Ứng dụng Quản Lý Công Việc. Chỉ HTML và CSS. Nút Thêm sẽ hiển thị nhưng chưa thêm được công việc vì chưa có Logic. Buổi 2 sẽ thêm Logic. Buổi 3 thêm Data lưu trữ. Buổi 4 làm sạch code. Buổi 5 deploy thành app thật. Hôm nay là bước đầu tiên.","html":"<div class=\"bg-color\" style=\"background:linear-gradient(135deg,#0a0a18,#0a1020)\"></div>\n<div class=\"content\"><h2 class=\"big\">Hành trình 5 buổi</h2>\n<div class=\"rule\" style=\"background:#6c63ff\"></div>\n<div style=\"display:flex;flex-direction:column;gap:0;width:100%;max-width:580px;margin-top:28px\">\n  <div style=\"display:flex;gap:16px;padding:12px 0;border-bottom:1px solid rgba(255,255,255,.06)\">\n    <div style=\"width:14px;height:14px;border-radius:50%;background:#6c63ff;flex-shrink:0;margin-top:3px;box-shadow:0 0 10px #6c63ff\"></div>\n    <div><div style=\"font-weight:700;color:#a5b4fc\">Buổi 1 — Hôm nay</div><div style=\"font-size:.83rem;color:var(--muted);margin-top:2px\">UI tĩnh — giao diện Ứng dụng Quản Lý Công Việc. Chỉ HTML + CSS.</div></div>\n  </div>\n  <div style=\"display:flex;gap:16px;padding:12px 0;border-bottom:1px solid rgba(255,255,255,.06)\">\n    <div style=\"width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,.1);border:2px solid rgba(255,255,255,.15);flex-shrink:0;margin-top:3px\"></div>\n    <div><div style=\"font-weight:700;color:rgba(255,255,255,.5)\">Buổi 2</div><div style=\"font-size:.83rem;color:var(--muted);margin-top:2px\">+ Logic: JavaScript, CRUD hoạt động đầy đủ</div></div>\n  </div>\n  <div style=\"display:flex;gap:16px;padding:12px 0;border-bottom:1px solid rgba(255,255,255,.06)\">\n    <div style=\"width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,.1);border:2px solid rgba(255,255,255,.15);flex-shrink:0;margin-top:3px\"></div>\n    <div><div style=\"font-weight:700;color:rgba(255,255,255,.5)\">Buổi 3</div><div style=\"font-size:.83rem;color:var(--muted);margin-top:2px\">+ Data: localStorage, không mất sau reload</div></div>\n  </div>\n  <div style=\"display:flex;gap:16px;padding:12px 0;border-bottom:1px solid rgba(255,255,255,.06)\">\n    <div style=\"width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,.1);border:2px solid rgba(255,255,255,.15);flex-shrink:0;margin-top:3px\"></div>\n    <div><div style=\"font-weight:700;color:rgba(255,255,255,.5)\">Buổi 4</div><div style=\"font-size:.83rem;color:var(--muted);margin-top:2px\">+ UX: code sạch, trải nghiệm tốt</div></div>\n  </div>\n  <div style=\"display:flex;gap:16px;padding:12px 0\">\n    <div style=\"width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,.1);border:2px solid rgba(255,255,255,.15);flex-shrink:0;margin-top:3px\"></div>\n    <div><div style=\"font-weight:700;color:rgba(255,255,255,.5)\">Buổi 5</div><div style=\"font-size:.83rem;color:var(--muted);margin-top:2px\">+ Deploy: URL thật, người khác truy cập được</div></div>\n  </div>\n</div></div>"},{"type":"teach","color":"#6c63ff","narration":"Ứng dụng đầu tiên chúng ta sẽ làm là Ứng dụng Quản Lý Công Việc. Đây là app đơn giản nhất để học web — giống như một cuốn sổ note điện tử. Bạn có thể ghi danh sách công việc cần làm, tick vào khi hoàn thành, và xóa đi khi không cần nữa. Hôm nay chúng ta chỉ tạo giao diện thôi.","html":"<div class=\"bg-color\" style=\"background:linear-gradient(135deg,#0a0a18,#0a1225)\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"background:rgba(108,99,255,.15);color:#a5b4fc;border-color:rgba(108,99,255,.4)\">Ứng dụng đầu tiên</div>\n<h2 class=\"big\">Ứng dụng Quản Lý Công Việc</h2>\n<div class=\"rule\" style=\"background:#6c63ff\"></div>\n<div style=\"display:flex;flex-direction:column;gap:14px;margin-top:32px;max-width:600px;width:100%\">\n  <div style=\"background:rgba(108,99,255,.08);border-left:3px solid #6c63ff;border-radius:10px;padding:18px 20px;text-align:left\">\n    <div style=\"font-weight:800;color:#c4b5fd;margin-bottom:6px;font-size:1.05rem\">Giống sổ note điện tử</div>\n    <div style=\"color:rgba(255,255,255,.7);line-height:1.7;font-size:.92rem\">Ghi danh sách việc cần làm — học bài, đi chợ, gọi điện...</div>\n  </div>\n  <div style=\"background:rgba(108,99,255,.08);border-left:3px solid #a5b4fc;border-radius:10px;padding:18px 20px;text-align:left\">\n    <div style=\"font-weight:800;color:#c4b5fd;margin-bottom:6px;font-size:1.05rem\">3 thao tác cơ bản</div>\n    <div style=\"color:rgba(255,255,255,.7);line-height:1.7;font-size:.92rem\">Thêm việc mới · Tick ✓ khi xong · Xóa khi không cần</div>\n  </div>\n  <div style=\"background:rgba(108,99,255,.08);border-left:3px solid #818cf8;border-radius:10px;padding:18px 20px;text-align:left\">\n    <div style=\"font-weight:800;color:#c4b5fd;margin-bottom:6px;font-size:1.05rem\">Hôm nay: chỉ giao diện</div>\n    <div style=\"color:rgba(255,255,255,.7);line-height:1.7;font-size:.92rem\">Chưa hoạt động thật — đó là việc của Buổi 2</div>\n  </div>\n</div></div>"},{"type":"question","color":"#f77f00","narration":"Câu hỏi kiểm tra: Ứng dụng Quản Lý Công Việc sẽ có những phần gì trên giao diện? Hãy chọn câu trả lời đầy đủ nhất.","question":"Ứng dụng Quản Lý Công Việc cần có những phần nào trên giao diện?","options":[{"text":"Chỉ cần ô nhập để ghi việc cần làm","correct":false,"feedback":"Chưa đủ! Có ô nhập thôi thì bạn ghi xong rồi không biết danh sách việc ở đâu. Cần thêm nơi hiển thị danh sách các công việc đã ghi."},{"text":"Tiêu đề + ô nhập + danh sách công việc","correct":true,"feedback":"Chính xác! 3 phần quan trọng: (1) Tiêu đề để người dùng biết đây là app gì. (2) ô nhập + nút Thêm để ghi việc mới. (3) Danh sách hiển thị các việc đã ghi — có ô tích và nút Xóa. Đây chính là cấu trúc chuẩn!"},{"text":"Chỉ cần danh sách công việc","correct":false,"feedback":"Thiếu ô nhập! Nếu không có ô nhập thì bạn thêm việc mới bằng cách nào? Người dùng cần nơi để gõ text và bấm nút Thêm."},{"text":"Chỉ cần nút Thêm và nút Xóa","correct":false,"feedback":"Nút Thêm và Xóa là hành động — nhưng bạn cần giao diện để HIỂN THỊ: ô nhập text, danh sách công việc. Không có giao diện thì nút bấm vào làm gì?"}]},{"type":"teach","color":"#6c63ff","narration":"Bây giờ đến kỹ năng quan trọng nhất hôm nay: cách nói chuyện với AI. AI không tự đoán được bạn muốn gì. AI chỉ làm đúng khi bạn mô tả đúng. Kỹ năng viết prompt tốt chính là kỹ năng tư duy rõ ràng. Tôi sẽ cho bạn xem sự khác biệt.","html":"<div class=\"bg-img\" style=\"background-image:url('https://images.unsplash.com/photo-1677442135703-1787eea5ce01?auto=format&fit=crop&w=1600&q=80')\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"background:rgba(0,0,0,.5);color:#d8b4fe;border-color:rgba(168,85,247,.4)\">Kỹ năng cốt lõi</div>\n<h1 class=\"huge\">Prompt Engineering</h1>\n<div class=\"rule\" style=\"background:#a855f7\"></div>\n<p class=\"sub\">AI không tự đoán được bạn muốn gì.<br/>AI chỉ làm đúng khi <strong>bạn mô tả đúng</strong>.</p></div>"},{"type":"teach","color":"#6c63ff","narration":"Xem 2 prompt này. Prompt xấu chỉ có 1 câu mơ hồ — AI sẽ tự quyết định stack, thiết kế, màu sắc, tính năng, và kết quả không ai đoán được. Prompt tốt thì ngược lại: nói rõ bạn là ai, mô tả từng phần cần tạo theo số thứ tự, giới hạn công nghệ dùng, và yêu cầu AI ô tích. Kết quả predictable hơn rất nhiều.","html":"<div class=\"bg-color\" style=\"background:#0a0a18\"></div>\n<div class=\"content\"><h2 class=\"big\">Prompt xấu vs Prompt tốt</h2>\n<div class=\"rule\" style=\"background:#a855f7\"></div>\n<div style=\"display:grid;grid-template-columns:1fr 1fr;gap:16px;width:100%;max-width:860px;margin-top:24px\">\n  <div style=\"background:rgba(239,68,68,.07);border:1px solid rgba(239,68,68,.25);border-radius:12px;padding:20px;text-align:left\">\n    <div style=\"font-size:.7rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:#f87171;margin-bottom:10px\">Prompt xấu</div>\n    <div style=\"font-size:.9rem;color:rgba(255,255,255,.75);line-height:1.7\">\"Làm cho tôi 1 trang web quản lý task.\"</div>\n    <div style=\"margin-top:10px;font-size:.8rem;color:#fca5a5;border-top:1px solid rgba(239,68,68,.2);padding-top:10px\">AI tự quyết định tất cả → tốn 3–5 lần hỏi lại</div>\n  </div>\n  <div style=\"background:rgba(6,214,160,.07);border:1px solid rgba(6,214,160,.25);border-radius:12px;padding:20px;text-align:left\">\n    <div style=\"font-size:.7rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:#34d399;margin-bottom:10px\">Prompt tốt</div>\n    <div style=\"font-size:.83rem;color:#c4b5fd;line-height:1.7\">\"Tôi đang học web từ đầu. Tạo HTML+CSS cho Ứng dụng Quản Lý Công Việc: (1) Header 'Công Việc Của Tôi'. (2) Form: ô nhập + nút Add. (3) Danh sách công việc: ô tích + text + nút Delete. Dùng Flexbox, màu #6c63ff. ô tích từng phần.\"</div>\n    <div style=\"margin-top:10px;font-size:.8rem;color:#34d399;border-top:1px solid rgba(6,214,160,.2);padding-top:10px\">Rõ context · Từng bước đánh số · Giới hạn scope</div>\n  </div>\n</div></div>"},{"type":"question","color":"#a855f7","narration":"Kiểm tra nhanh. Bạn cần AI tạo phần header cho Ứng dụng Quản Lý Công Việc. Prompt nào sau đây sẽ cho kết quả tốt nhất?","question":"Cần AI tạo phần HEADER cho Ứng dụng Quản Lý Công Việc. Prompt nào tốt nhất?","options":[{"text":"\"Tạo header cho tôi\"","correct":false,"feedback":"\"Header\" theo AI có thể là navigation bar, có thể là hero section, có thể là badge text. Quá mơ hồ. AI sẽ đoán và kết quả khó đoán."},{"text":"\"Tạo HTML header cho Ứng dụng Quản Lý Công Việc gồm: logo text Công Việc Của Tôi bên trái, hiển thị số task còn lại bên phải. Dùng Flexbox. Font sans-serif. ô tích code.\"","correct":true,"feedback":"Hoàn hảo! 5 yếu tố đủ cả: (1) Bối cảnh Ứng dụng Quản Lý Công Việc, (2) Mô tả chi tiết 2 phần logo + counter, (3) Giới hạn dùng Flexbox, (4) Font cụ thể, (5) Yêu cầu ô tích. AI sẽ tạo đúng ngay lần đầu."},{"text":"\"Tạo header đẹp, màu tím, professional\"","correct":false,"feedback":"\"Đẹp\" và \"professional\" là chủ quan — 10 người có 10 định nghĩa khác nhau. AI cần thông số cụ thể: màu hex cụ thể, layout mô tả, font size..."},{"text":"\"Tôi cần header, bạn có thể giúp tôi không?\"","correct":false,"feedback":"Đây là câu hỏi, không phải prompt. AI sẽ hỏi ngược lại. Luôn bắt đầu bằng yêu cầu rõ ràng, không hỏi \"có thể... không\"."}]},{"type":"teach","color":"#6c63ff","narration":"Tổng kết lại thành công thức 5 yếu tố. Một: cho AI biết bạn đang làm dự án gì. Hai: mô tả yêu cầu từng bước, đánh số thứ tự. Ba: giới hạn công nghệ, ví dụ chỉ dùng HTML CSS không cần JavaScript. Bốn: chỉ định style nếu có — màu sắc, font. Năm: yêu cầu AI ô tích để bạn học được. Đây là công thức bạn dùng suốt 5 buổi.","html":"<div class=\"bg-color\" style=\"background:linear-gradient(135deg,#0a0a18,#120a20)\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"background:rgba(168,85,247,.15);color:#d8b4fe;border-color:rgba(168,85,247,.35)\">Công thức prompt</div>\n<h2 class=\"big\">5 yếu tố của prompt tốt</h2>\n<div class=\"rule\" style=\"background:#a855f7\"></div>\n<div style=\"display:flex;flex-direction:column;gap:10px;margin-top:24px;max-width:700px;width:100%\">\n  <div style=\"display:flex;align-items:center;gap:14px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:10px;padding:12px 16px;font-size:.9rem\">\n    <div style=\"width:30px;height:30px;border-radius:8px;background:#6c63ff;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.85rem;flex-shrink:0\">1</div>\n    <div><strong style=\"color:#fff\">Bối cảnh dự án</strong> — \"Tôi đang build Ứng dụng Quản Lý Công Việc, học web từ đầu\"</div>\n  </div>\n  <div style=\"display:flex;align-items:center;gap:14px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:10px;padding:12px 16px;font-size:.9rem\">\n    <div style=\"width:30px;height:30px;border-radius:8px;background:#7c3aed;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.85rem;flex-shrink:0\">2</div>\n    <div><strong style=\"color:#fff\">Yêu cầu từng bước</strong> — Đánh số (1), (2), (3) không viết liền 1 đoạn</div>\n  </div>\n  <div style=\"display:flex;align-items:center;gap:14px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:10px;padding:12px 16px;font-size:.9rem\">\n    <div style=\"width:30px;height:30px;border-radius:8px;background:#9333ea;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.85rem;flex-shrink:0\">3</div>\n    <div><strong style=\"color:#fff\">Giới hạn scope</strong> — \"Chỉ HTML/CSS, không cần JavaScript\"</div>\n  </div>\n  <div style=\"display:flex;align-items:center;gap:14px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:10px;padding:12px 16px;font-size:.9rem\">\n    <div style=\"width:30px;height:30px;border-radius:8px;background:#a855f7;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.85rem;flex-shrink:0\">4</div>\n    <div><strong style=\"color:#fff\">Style cụ thể</strong> — Màu hex, font, layout Flexbox/Grid</div>\n  </div>\n  <div style=\"display:flex;align-items:center;gap:14px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:10px;padding:12px 16px;font-size:.9rem\">\n    <div style=\"width:30px;height:30px;border-radius:8px;background:#c084fc;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.85rem;flex-shrink:0\">5</div>\n    <div><strong style=\"color:#fff\">Yêu cầu ô tích</strong> — ô tích từng section để tôi hiểu\"</div>\n  </div>\n</div></div>"},{"type":"practice","color":"#06d6a0","narration":"Bắt đầu thực hành. Bước một: mở VS Code, tạo folder task-manager, tạo file index.html bên trong. Bước hai: cài extension Live Server nếu chưa có. Bước ba: click chuột phải vào index.html, chọn Open with Live Server. Trình duyệt sẽ mở localhost 5500. Khi bạn lưu file, trình duyệt tự reload. Làm xong bước này rồi tiếp tục.","html":"<div class=\"bg-color\" style=\"background:linear-gradient(135deg,#0a130a,#0a1a10)\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"background:rgba(6,214,160,.12);color:#34d399;border-color:rgba(6,214,160,.3)\">Thực hành — Bước 1</div>\n<h2 class=\"big\" style=\"color:#34d399\">Setup project</h2>\n<div class=\"rule\" style=\"background:#06d6a0\"></div>\n<ul style=\"list-style:none;width:100%;max-width:620px;margin-top:24px\">\n  <li style=\"display:flex;align-items:flex-start;gap:14px;padding:11px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:.93rem;color:rgba(255,255,255,.8)\">\n    <div style=\"width:28px;height:28px;border-radius:7px;background:#06d6a0;color:#0a1a0a;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.82rem;flex-shrink:0\">1</div>\n    Mở VS Code → tạo folder <code style=\"background:rgba(255,255,255,.08);padding:2px 7px;border-radius:4px;font-family:'Fira Code',monospace;color:#a5b4fc\">task-manager/</code> → tạo file <code style=\"background:rgba(255,255,255,.08);padding:2px 7px;border-radius:4px;font-family:'Fira Code',monospace;color:#a5b4fc\">index.html</code>\n  </li>\n  <li style=\"display:flex;align-items:flex-start;gap:14px;padding:11px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:.93rem;color:rgba(255,255,255,.8)\">\n    <div style=\"width:28px;height:28px;border-radius:7px;background:#06d6a0;color:#0a1a0a;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.82rem;flex-shrink:0\">2</div>\n    Extensions → tìm <strong style=\"color:#fff\">Live Server</strong> (Ritwick Dey) → Install\n  </li>\n  <li style=\"display:flex;align-items:flex-start;gap:14px;padding:11px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:.93rem;color:rgba(255,255,255,.8)\">\n    <div style=\"width:28px;height:28px;border-radius:7px;background:#06d6a0;color:#0a1a0a;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.82rem;flex-shrink:0\">3</div>\n    Chuột phải vào <code style=\"background:rgba(255,255,255,.08);padding:2px 7px;border-radius:4px;font-family:'Fira Code',monospace;color:#a5b4fc\">index.html</code> → <strong style=\"color:#fff\">Open with Live Server</strong>\n  </li>\n  <li style=\"display:flex;align-items:flex-start;gap:14px;padding:11px 0;font-size:.93rem;color:rgba(255,255,255,.8)\">\n    <div style=\"width:28px;height:28px;border-radius:7px;background:#06d6a0;color:#0a1a0a;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.82rem;flex-shrink:0\">4</div>\n    Browser mở <code style=\"background:rgba(255,255,255,.08);padding:2px 7px;border-radius:4px;font-family:'Fira Code',monospace;color:#a5b4fc\">localhost:5500</code> — sẵn sàng!\n  </li>\n</ul></div>"},{"type":"practice","color":"#06d6a0","narration":"Bước hai: mở ChatGPT, Claude, hoặc Gemini. Gửi đúng prompt mẫu này. Đọc lướt code AI trả về trước khi copy — nhận ra các phần: đây là header, đây là form, đây là danh sách. Sau đó copy toàn bộ vào index.html, lưu Ctrl+S, xem kết quả.","html":"<div class=\"bg-color\" style=\"background:linear-gradient(135deg,#0a130a,#0a1820)\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"background:rgba(6,214,160,.12);color:#34d399;border-color:rgba(6,214,160,.3)\">Thực hành — Bước 2</div>\n<h2 class=\"big\" style=\"color:#34d399\">Gửi prompt cho AI</h2>\n<div class=\"rule\" style=\"background:#06d6a0\"></div>\n<div style=\"background:rgba(108,99,255,.1);border:1px solid rgba(108,99,255,.3);border-radius:12px;padding:20px 24px;max-width:780px;width:100%;text-align:left;font-size:.87rem;line-height:1.7;color:#c4b5fd;margin-top:20px\">\n  <div style=\"font-size:.68rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:#818cf8;margin-bottom:8px\">Prompt mẫu — copy và gửi</div>\n  Tôi đang học lập trình web từ đầu. Tạo giao diện HTML + CSS cho Ứng dụng Quản Lý Công Việc gồm: (1) Header với tiêu đề \"Công Việc Của Tôi\". (2) ô nhập task: ô nhập text placeholder \"Thêm việc mới...\" và button \"Add\". (3) Danh sách 3 task mẫu: mỗi task có ô tích, text, button \"Delete\". Yêu cầu: semantic HTML5, CSS Flexbox, responsive, màu chủ #6c63ff, font system-ui. ô tích từng phần của code.\n</div>\n<div style=\"display:flex;align-items:flex-start;gap:12px;background:rgba(255,209,102,.07);border:1px solid rgba(255,209,102,.2);border-radius:10px;padding:12px 16px;font-size:.88rem;color:rgba(255,255,255,.7);max-width:780px;width:100%;margin-top:14px;text-align:left\">\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#fcd34d\" stroke-width=\"2\" stroke-linecap=\"round\" style=\"flex-shrink:0;margin-top:1px\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"/><line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"/></svg>\n  <span>Nhận code xong → đọc lướt cấu trúc TRƯỚC khi copy vào VS Code</span>\n</div></div>"},{"type":"question","color":"#f77f00","narration":"Câu hỏi về quy trình. Sau khi AI trả về code, bạn làm gì đầu tiên?","question":"AI vừa tạo xong 80 dòng HTML/CSS cho Ứng dụng Quản Lý Công Việc. Bước đầu tiên của bạn là gì?","options":[{"text":"Copy toàn bộ, paste vào index.html, lưu ngay","correct":false,"feedback":"Không sai hoàn toàn — code chạy được, nhưng bạn không học được gì. Nếu sau này có lỗi, bạn không biết sửa ở đâu. Và nếu AI hiểu sai yêu cầu, bạn cũng không nhận ra."},{"text":"Đọc lướt qua để nhận ra cấu trúc các phần","correct":true,"feedback":"Đúng! Không cần hiểu từng ký tự. Chỉ cần nhận ra: \"đây là phần header\", \"đây là form\", \"đây là list item\". Như đọc mục lục sách trước khi đọc chi tiết. Rồi mới copy và chạy."},{"text":"Hỏi AI ô tích từng dòng trước khi dùng","correct":false,"feedback":"Tốt nhưng không hiệu quả — 80 dòng ô tích từng dòng sẽ mất 20 phút. Đọc lướt trước, chạy thử, rồi chỉ hỏi những đoạn bạn không hiểu là đủ."},{"text":"Test trên nhiều trình duyệt trước","correct":false,"feedback":"Đây là bước kiểm tra sau khi code đã chạy ổn. Ưu tiên số 1 là đọc qua để hiểu cấu trúc, rồi mới chạy, rồi mới kiểm tra cross-browser."}]},{"type":"reflect","color":"#6c63ff","narration":"Bạn vừa tạo được giao diện Ứng dụng Quản Lý Công Việc đầu tiên. Lưu ý quan trọng: thử click nút Thêm — công việc không được thêm vào danh sách. Tại sao? Vì chúng ta chỉ có UI — chưa có Logic. Đây là trạng thái \"poster đẹp nhưng không hoạt động\". Và đây chính xác là điểm dừng hôm nay.","html":"<div class=\"bg-color\" style=\"background:#0a0a18\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"background:rgba(6,214,160,.12);color:#34d399;border-color:rgba(6,214,160,.3)\">Nhận xét quan trọng</div>\n<h2 class=\"big\">Thử click nút Add</h2>\n<div class=\"rule\" style=\"background:#06d6a0\"></div>\n<div style=\"max-width:640px;width:100%;margin-top:28px\">\n  <div style=\"background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.2);border-radius:12px;padding:20px 24px;text-align:left;margin-bottom:14px\">\n    <div style=\"font-weight:700;color:#f87171;margin-bottom:6px\">Quan sát</div>\n    <div style=\"font-size:.9rem;color:rgba(255,255,255,.75);line-height:1.65\">Bấm nút Add → không có gì xảy ra.<br/>Checkbox → không tick được.<br/>Delete → không xóa được task.</div>\n  </div>\n  <div style=\"background:rgba(108,99,255,.08);border:1px solid rgba(108,99,255,.2);border-radius:12px;padding:20px 24px;text-align:left\">\n    <div style=\"font-weight:700;color:#a5b4fc;margin-bottom:6px\">Lý do</div>\n    <div style=\"font-size:.9rem;color:rgba(255,255,255,.75);line-height:1.65\">Chúng ta chỉ có <strong style=\"color:#fff\">UI</strong> — giao diện tĩnh.<br/>Chưa có <strong style=\"color:#fcd34d\">Logic</strong> — xử lý hành động.<br/>Buổi 2 sẽ thêm Logic vào.</div>\n  </div>\n</div></div>"},{"type":"question","color":"#f77f00","narration":"Câu hỏi tổng kết: Tại sao nút Thêm trong Ứng dụng Quản Lý Công Việc hiện tại không hoạt động?","question":"Nút Thêm trong Ứng dụng Quản Lý Công Việc vừa build — tại sao click vào không có gì xảy ra?","options":[{"text":"Vì HTML bị lỗi","correct":false,"feedback":"Không phải lỗi HTML. HTML ổn — nó render ra button trên màn hình. Vấn đề không phải là \"cái gì bị hỏng\", mà là \"cái gì chưa được thêm vào\"."},{"text":"Vì chưa có JavaScript xử lý sự kiện click","correct":true,"feedback":"Chính xác! JavaScript là phần Logic. Khi button được click, cần có event listener để nhận sự kiện đó và hành động. Không có JS = không có Logic = nút click không có gì xảy ra. Đây là nhiệm vụ của Buổi 2."},{"text":"Vì CSS chưa style cho button đúng","correct":false,"feedback":"CSS chỉ quyết định cách button trông như thế nào — màu sắc, kích thước, border radius. CSS không xử lý hành vi (behavior) của button."},{"text":"Vì chưa kết nối database","correct":false,"feedback":"Database (Data) là tầng thứ 3, cần đến Buổi 3. Ngay cả khi có database, bạn vẫn cần Logic để đọc/ghi dữ liệu. Thiếu Logic là vấn đề chính."}]},{"type":"reflect","color":"#6c63ff","narration":"Checklist cuối buổi. Kiểm tra 5 điều. Một: giao diện Ứng dụng Quản Lý Công Việc hiển thị được trên trình duyệt. Hai: có header, ô nhập công việc, và danh sách công việc mẫu. Ba: responsive — thu nhỏ cửa sổ không vỡ layout. Bốn: bạn có thể ô tích ít nhất 3 dòng CSS. Năm: bạn hiểu tại sao nút Thêm chưa hoạt động. Nếu cả 5 đều có, buổi 1 thành công.","html":"<div class=\"bg-color\" style=\"background:#0a0a18\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"background:rgba(6,214,160,.12);color:#34d399;border-color:rgba(6,214,160,.3)\">Checklist cuối buổi</div>\n<h2 class=\"big\">Bạn đã làm được gì?</h2>\n<div class=\"rule\" style=\"background:#06d6a0\"></div>\n<ul style=\"list-style:none;max-width:580px;width:100%;margin-top:24px\">\n  <li style=\"display:flex;align-items:center;gap:14px;padding:11px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:.95rem;color:rgba(255,255,255,.8)\"><svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#06d6a0\" stroke-width=\"2.5\" stroke-linecap=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg>Browser hiển thị được giao diện Ứng dụng Quản Lý Công Việc</li>\n  <li style=\"display:flex;align-items:center;gap:14px;padding:11px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:.95rem;color:rgba(255,255,255,.8)\"><svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#06d6a0\" stroke-width=\"2.5\" stroke-linecap=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg>Có header + ô nhập + danh sách công việc mẫu</li>\n  <li style=\"display:flex;align-items:center;gap:14px;padding:11px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:.95rem;color:rgba(255,255,255,.8)\"><svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#06d6a0\" stroke-width=\"2.5\" stroke-linecap=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg>Responsive — không vỡ layout trên mobile</li>\n  <li style=\"display:flex;align-items:center;gap:14px;padding:11px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:.95rem;color:rgba(255,255,255,.8)\"><svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#06d6a0\" stroke-width=\"2.5\" stroke-linecap=\"round\"><polyline points=\"20 6 9 17 4 12\"/><\/svg>ô tích được ≥ 3 dòng CSS<\/li>\n  <li style=\"display:flex;align-items:center;gap:14px;padding:11px 0;font-size:.95rem;color:rgba(255,255,255,.8)\"><svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#06d6a0\" stroke-width=\"2.5\" stroke-linecap=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg>Hiểu tại sao nút Thêm chưa hoạt động</li>\n</ul></div>"},{"type":"teach","color":"#6c63ff","narration":"Hôm nay bạn đã học và làm được 3 thứ quan trọng. Thứ nhất: Mental Model số 1 — Web bằng UI cộng Logic cộng Data. Thứ hai: Kỹ năng prompt AI với 5 yếu tố để ra lệnh chính xác. Thứ ba: Build giao diện thật bằng HTML CSS không cần biết syntax trước. Đây là nền tảng. Các buổi tiếp theo sẽ thêm từng tầng vào project này.","html":"<div class=\"bg-color\" style=\"background:linear-gradient(135deg,#0a0a18,#12082a)\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"background:rgba(108,99,255,.15);color:#a5b4fc;border-color:rgba(108,99,255,.4)\">Tổng kết buổi 1</div>\n<h2 class=\"big\">3 thứ bạn đã học hôm nay</h2>\n<div class=\"rule\" style=\"background:#6c63ff\"></div>\n<div style=\"display:flex;flex-direction:column;gap:12px;margin-top:28px;max-width:680px;width:100%\">\n  <div style=\"display:flex;gap:16px;background:rgba(108,99,255,.1);border:1px solid rgba(108,99,255,.25);border-radius:12px;padding:18px 20px\">\n    <div style=\"font-size:1.6rem;flex-shrink:0\">🧠</div>\n    <div><div style=\"font-weight:800;color:#c4b5fd;margin-bottom:4px\">Mental Model #1</div><div style=\"font-size:.88rem;color:rgba(255,255,255,.65)\">Web = UI + Logic + Data. Thiếu 1 trong 3 → không thành hệ thống.</div></div>\n  </div>\n  <div style=\"display:flex;gap:16px;background:rgba(168,85,247,.08);border:1px solid rgba(168,85,247,.2);border-radius:12px;padding:18px 20px\">\n    <div style=\"font-size:1.6rem;flex-shrink:0\">💬</div>\n    <div><div style=\"font-weight:800;color:#d8b4fe;margin-bottom:4px\">Prompt Engineering</div><div style=\"font-size:.88rem;color:rgba(255,255,255,.65)\">5 yếu tố để ra lệnh AI chính xác: context, từng bước, scope, style, ô tích.</div></div>\n  </div>\n  <div style=\"display:flex;gap:16px;background:rgba(6,214,160,.07);border:1px solid rgba(6,214,160,.18);border-radius:12px;padding:18px 20px\">\n    <div style=\"font-size:1.6rem;flex-shrink:0\">🏗️</div>\n    <div><div style=\"font-weight:800;color:#6ee7b7;margin-bottom:4px\">Build thật</div><div style=\"font-size:.88rem;color:rgba(255,255,255,.65)\">Giao diện Ứng dụng Quản Lý Công Việc chạy trên browser, tạo bằng AI không cần biết syntax trước.</div></div>\n  </div>\n</div></div>"},{"type":"teach","color":"#f77f00","narration":"Buổi 2 sẽ chữa đứt điểm của hôm nay: nút Add sẽ hoạt động thật sự. Chúng ta sẽ học State là gì, tại sao giao diện phải phản ánh đúng trạng thái dữ liệu, và hoàn thiện toàn bộ CRUD. Hẹn gặp lại buổi 2.","html":"<div class=\"bg-img\" style=\"background-image:url('https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?auto=format&fit=crop&w=1600&q=80')\"></div>\n<div class=\"content\"><div class=\"stag\" style=\"background:rgba(0,0,0,.5);color:#fdba74;border-color:rgba(247,127,0,.4)\">Preview — Buổi 2</div>\n<h2 class=\"big\">Buổi 2: State & Tương tác</h2>\n<div class=\"rule\" style=\"background:#f77f00\"></div>\n<p class=\"sub\" style=\"margin-top:18px\">Nút Add sẽ hoạt động thật sự.<br/>CRUD đầy đủ: thêm, tick, xóa task.<br/><strong style=\"color:#fdba74\">Câu hỏi: khi thêm xong task, bạn làm sao biết UI đang hiển thị đúng dữ liệu?</strong></p></div>"}];

// ── Build slides ──────────────────────────────────────────
const deck = document.getElementById('deck');
SLIDES.forEach((s,i)=>{
  const el = document.createElement('div');
  el.className = 'slide';
  el.innerHTML = s.html;
  deck.appendChild(el);
});
const allSlides = deck.querySelectorAll('.slide');

// ── State ─────────────────────────────────────────────────
let cur = 0;
let autoMode = false;
let speaking = false;
let audioSrc = null;
let voiceRate = parseFloat(localStorage.getItem('b1_rate') || '0.9');
const FPT_KEY = 'XNZzpBQVWhTOCRc7MhOGbezPQznkhNew';
const FPT_VOICE = 'banmai';
let qAnswered = false;
let qState = null; // null | 'reading' | 'countdown' | 'reading_feedback'
let qThinkTimer = null;
let qFallbackTimer = null;
let speakGen = 0;       // incremented each speak() call; stale callbacks check this
let slideMinTimer = null; // minimum display time per slide in AUTO mode

// ── Settings ─────────────────────────────────────────────
const settingsBtn = document.getElementById('settings-btn');
const settingsPanel = document.getElementById('settings-panel');
const sClose = document.getElementById('s-close');
const sRate = document.getElementById('s-rate');
const sRateVal = document.getElementById('s-rate-val');
const sSave = document.getElementById('s-save');
const sTest = document.getElementById('s-test');

sRate.value = voiceRate;
sRateVal.textContent = voiceRate.toFixed(2)+'×';

sRate.addEventListener('input', ()=>{ voiceRate = +sRate.value; sRateVal.textContent = voiceRate.toFixed(2)+'×'; });
settingsBtn.onclick = ()=>settingsPanel.classList.toggle('open');
sClose.onclick = ()=>settingsPanel.classList.remove('open');
sSave.onclick = ()=>{
  voiceRate = +sRate.value;
  localStorage.setItem('b1_rate', voiceRate);
  settingsPanel.classList.remove('open');
};
sTest.onclick = ()=>speak('Xin chào! Đây là giọng Ban Mai, tốc độ ' + voiceRate.toFixed(1) + ' lần.');

// ── Voice ─────────────────────────────────────────────────
const vPlay = document.getElementById('v-play');
const icoPlay = document.getElementById('ico-play');
const icoPause = document.getElementById('ico-pause');
const vScript = document.getElementById('v-script');
const vlBar = document.getElementById('vl');

const ttsCache = new Map(); // cache audio URL by text to avoid repeated API calls

function stopVoice(){
  speakGen++;
  if(audioSrc){ audioSrc.onended=null; audioSrc.onerror=null; audioSrc.pause(); audioSrc=null; }
  speaking = false;
  vPlay.classList.remove('playing');
  icoPlay.style.display = '';
  icoPause.style.display = 'none';
  vlBar.style.width = '0';
  // clear Q auto state
  qState = null;
  if(qThinkTimer){ clearInterval(qThinkTimer); qThinkTimer = null; }
  if(qFallbackTimer){ clearTimeout(qFallbackTimer); qFallbackTimer = null; }
  if(slideMinTimer){ clearTimeout(slideMinTimer); slideMinTimer = null; }
  const cdEl = document.getElementById('q-countdown');
  const cbEl = document.getElementById('q-cbar-wrap');
  if(cdEl) cdEl.style.display = 'none';
  if(cbEl) cbEl.style.display = 'none';
}

async function speakFPT(text, gen){
  try {
    let audioUrl = ttsCache.get(text);
    if(!audioUrl){
      const fptSpeed = String(Math.max(-3, Math.min(3, Math.round((voiceRate - 1.0) * 7.5))));
      const resp = await fetch('https://api.fpt.ai/hmi/tts/v5', {
        method:'POST',
        headers:{'api-key': FPT_KEY, 'speed': fptSpeed, 'voice': FPT_VOICE},
        body: text
      });
      if(gen !== speakGen) return false;
      if(!resp.ok){ console.warn('FPT.AI TTS error',resp.status); return false; }
      const data = await resp.json();
      if(gen !== speakGen) return false;
      if(!data.async) { console.warn('FPT.AI no audio URL'); return false; }
      audioUrl = data.async;
      ttsCache.set(text, audioUrl);
    }
    if(gen !== speakGen) return false;
    audioSrc = new Audio(audioUrl);
    const estMs = (text.length * 65) / Math.max(0.5, voiceRate);
    let start = null;
    function tick(ts){
      if(!speaking||!audioSrc||gen!==speakGen) return;
      if(!start) start = ts;
      vlBar.style.width = Math.min(100,((ts-start)/estMs)*100)+'%';
      if(speaking) requestAnimationFrame(tick);
    }
    audioSrc.onplay = ()=>{ speaking=true; requestAnimationFrame(tick); };
    audioSrc.onended = audioSrc.onerror = ()=>{ if(gen===speakGen) onSpeakEnd(); };
    await audioSrc.play();
    return true;
  } catch(e){ console.warn('FPT.AI TTS failed',e); if(audioSrc){ audioSrc.onended=null; audioSrc.onerror=null; audioSrc.pause(); audioSrc=null; } return false; }
}

function onSpeakEnd(){
  speaking = false;
  audioSrc = null;
  vPlay.classList.remove('playing');
  icoPlay.style.display = '';
  icoPause.style.display = 'none';
  setTimeout(()=>vlBar.style.width='0',600);
  // feedback just finished — close Q panel and advance
  if(qState === 'reading_feedback'){
    if(qFallbackTimer){ clearTimeout(qFallbackTimer); qFallbackTimer = null; }
    qState = null;
    qPanel.classList.remove('show');
    // go to next whether autoMode is on or off (user already answered)
    setTimeout(()=>go(cur+1, autoMode), 700);
    return;
  }
  if(!autoMode){ return; }
  if(qState === 'reading'){
    startAutoCountdown();
  } else {
    onAutoSpeakDone();
  }
}

async function speak(text){
  // cancel audio only — do NOT call stopVoice() which resets qState and breaks auto flow
  speakGen++;
  if(audioSrc){ audioSrc.onended=null; audioSrc.onerror=null; audioSrc.pause(); audioSrc=null; }
  if(!text){ speaking=false; return; }
  const gen = speakGen;
  vScript.textContent = text;
  speaking = true;
  vPlay.classList.add('playing');
  icoPlay.style.display = 'none';
  icoPause.style.display = '';
  const ok = await speakFPT(text, gen);
  if(gen !== speakGen) return;
  if(!ok){ speaking=false; vPlay.classList.remove('playing'); icoPlay.style.display=''; icoPause.style.display='none'; if(gen===speakGen) onSpeakEnd(); }
}

function onAutoSpeakDone(){
  slideMinTimer = setTimeout(()=>{ slideMinTimer=null; if(autoMode) go(cur+1, true); }, 2500);
}

function startAutoCountdown(){
  qState = 'countdown';
  let secs = 4;
  const cdEl = document.getElementById('q-countdown');
  const cbWrap = document.getElementById('q-cbar-wrap');
  const cbFill = document.getElementById('q-cbar-fill');
  if(cdEl){ cdEl.textContent = '⏳ Suy nghĩ... ' + secs + 's'; cdEl.style.display = 'block'; }
  if(cbWrap){ cbWrap.style.display = 'block'; }
  if(cbFill){
    cbFill.style.transition = 'none';
    cbFill.style.width = '100%';
    setTimeout(()=>{
      cbFill.style.transition = 'width ' + secs + 's linear';
      cbFill.style.width = '0%';
    }, 60);
  }
  qThinkTimer = setInterval(()=>{
    secs--;
    if(cdEl) cdEl.textContent = secs > 0 ? ('⏳ Suy nghĩ... ' + secs + 's') : '✨ Xem đáp án...';
    if(secs <= 0){
      clearInterval(qThinkTimer); qThinkTimer = null;
      if(cdEl) cdEl.style.display = 'none';
      if(cbWrap) cbWrap.style.display = 'none';
      autoRevealAnswer();
    }
  }, 1000);
}

function autoRevealAnswer(){
  if(!autoMode) return;
  const s = SLIDES[cur];
  if(!s || s.type !== 'question') return;
  qAnswered = true;
  const correctIdx = s.options.findIndex(o => o.correct);
  const btns = qOpts.querySelectorAll('.q-opt');
  btns.forEach(b => { b.disabled = true; });
  if(btns[correctIdx]) btns[correctIdx].classList.add('correct');
  const opt = s.options[correctIdx];
  qFeedback.innerHTML = '<strong style="color:#34d399">✅ Đáp án đúng:</strong> ' + opt.feedback;
  qFeedback.classList.add('show');
  // don't show continue button — auto flow handles it
  qContinue.className = 'b-btn'; // hidden
  qState = 'reading_feedback';
  speak(opt.feedback);
  // fallback in case TTS fails
  if(qFallbackTimer) clearTimeout(qFallbackTimer);
  qFallbackTimer = setTimeout(()=>{
    if(qState === 'reading_feedback'){
      qState = null;
      qPanel.classList.remove('show');
      go(cur+1, true);
    }
  }, 8000);
}

vPlay.onclick = ()=>{ speaking ? stopVoice() : speak(SLIDES[cur].narration); };

// ── AUTO mode ─────────────────────────────────────────────
const vAuto = document.getElementById('v-auto');
vAuto.onclick = ()=>{
  autoMode = !autoMode;
  vAuto.classList.toggle('on', autoMode);
  vAuto.title = autoMode ? 'Dừng AUTO' : 'AUTO: tự dạy, tự hỏi, đợi bạn trả lời rồi tiếp';
  if(autoMode){
    // ô tíching from current slide
    const s = SLIDES[cur];
    if(s.type==='question') showQPanel(s);
    else speak(s.narration);
  } else {
    stopVoice();
    qPanel.classList.remove('show');
  }
};

// ── Q Panel ───────────────────────────────────────────────
const qPanel = document.getElementById('q-panel');
const qText = document.getElementById('q-text');
const qOpts = document.getElementById('q-opts');
const qFeedback = document.getElementById('q-feedback');
const qContinue = document.getElementById('q-continue');

function showQPanel(s){
  qAnswered = false;
  // reset auto state
  qState = autoMode ? 'reading' : null;
  if(qThinkTimer){ clearInterval(qThinkTimer); qThinkTimer = null; }
  const cdEl = document.getElementById('q-countdown');
  const cbEl = document.getElementById('q-cbar-wrap');
  if(cdEl) cdEl.style.display = 'none';
  if(cbEl) cbEl.style.display = 'none';
  qText.textContent = s.question;
  qOpts.innerHTML = '';
  qFeedback.className = '';
  qFeedback.textContent = '';
  qContinue.className = 'b-btn';
  const labels = ['A','B','C','D'];
  s.options.forEach((opt,i)=>{
    const btn = document.createElement('button');
    btn.className = 'q-opt';
    btn.innerHTML = `<span class="opt-num">${labels[i]}</span><span>${opt.text}</span>`;
    btn.onclick = ()=>{
      if(qAnswered) return;
      // if auto countdown is running, stop it (user clicked early)
      if(qThinkTimer){ clearInterval(qThinkTimer); qThinkTimer = null; }
      const cdEl2 = document.getElementById('q-countdown');
      const cbEl2 = document.getElementById('q-cbar-wrap');
      if(cdEl2) cdEl2.style.display = 'none';
      if(cbEl2) cbEl2.style.display = 'none';
      qAnswered = true;
      qOpts.querySelectorAll('.q-opt').forEach(b=>{ b.disabled=true; });
      btn.classList.add(opt.correct ? 'correct' : 'wrong');
      if(!opt.correct){
        qOpts.querySelectorAll('.q-opt')[s.options.findIndex(o=>o.correct)].classList.add('correct');
      }
      const icon = opt.correct ? '✅' : '💡';
      qFeedback.innerHTML = `<strong style="color:${opt.correct?'#34d399':'#fcd34d'}">${icon} ${opt.correct ? 'Chính xác!' : 'Chưa đúng —'}</strong> ${opt.feedback}`;
      qFeedback.classList.add('show');
      // show skip button in case TTS fails
      qContinue.style.background = opt.correct ? '#06d6a0' : '#f77f00';
      qContinue.style.color = opt.correct ? '#0a1a0a' : '#fff';
      qContinue.classList.add('show');
      // set state so onSpeakEnd auto-advances
      qState = 'reading_feedback';
      const capturedAuto = autoMode;
      speak(opt.feedback);
      // fallback: if TTS never fires onSpeakEnd, advance after 8s
      if(qFallbackTimer) clearTimeout(qFallbackTimer);
      qFallbackTimer = setTimeout(()=>{
        if(qState === 'reading_feedback'){
          qState = null;
          qPanel.classList.remove('show');
          go(cur+1, capturedAuto);
        }
      }, 8000);
    };
    qOpts.appendChild(btn);
  });
  qPanel.classList.add('show');
  // read question
  speak(s.narration || s.question);
}

qContinue.onclick = ()=>{
  if(qFallbackTimer){ clearTimeout(qFallbackTimer); qFallbackTimer = null; }
  qState = null;
  stopVoice();
  qPanel.classList.remove('show');
  // if auto mode: resume auto chain; if manual: just navigate to next slide
  setTimeout(()=> autoMode ? go(cur+1, true) : go(cur+1), 200);
};

// ── Navigation ────────────────────────────────────────────
const prog = document.getElementById('prog');
const counter = document.getElementById('counter');

function go(idx, fromAuto){
  if(idx < 0 || idx >= SLIDES.length) return;
  if(!fromAuto){ 
    stopVoice(); 
    qPanel.classList.remove('show'); 
    // disable AUTO mode when manually navigating
    autoMode = false;
    vAuto.classList.remove('on');
  }
  const prevIdx = cur;                             // capture before cur changes
  if(prevIdx !== idx){
    allSlides[prevIdx].className = 'slide out';
    setTimeout(()=>{ if(allSlides[prevIdx]) allSlides[prevIdx].className='slide'; }, 400);
  }
  allSlides[idx].className = 'slide active';
  cur = idx;
  const pct = (cur/(SLIDES.length-1))*100;
  prog.style.width = pct+'%';
  prog.style.background = SLIDES[cur].color || '#6c63ff';
  counter.textContent = (cur+1)+'/'+SLIDES.length;
  vScript.textContent = SLIDES[cur].narration || '(Không có thuyết minh)';

  const s = SLIDES[cur];
  if(s.type==='question') setTimeout(()=>showQPanel(s), 350);
  else if(fromAuto) speak(s.narration);
}

document.getElementById('nav-next').onclick = ()=>go(cur+1);
document.getElementById('nav-prev').onclick = ()=>go(cur-1);

document.addEventListener('keydown',e=>{
  if(e.target.tagName==='INPUT'||e.target.tagName==='SELECT'||e.target.tagName==='TEXTAREA') return;
  if(e.key==='ArrowRight'||e.key==='ArrowDown'||e.key===' '){e.preventDefault();go(cur+1)}
  if(e.key==='ArrowLeft'||e.key==='ArrowUp'){e.preventDefault();go(cur-1)}
  if(e.key==='v'||e.key==='V'){ speaking ? stopVoice() : speak(SLIDES[cur].narration); }
  if(e.key==='a'||e.key==='A'){ vAuto.click(); }
  if(e.key==='Home') go(0);
  if(e.key==='End') go(SLIDES.length-1);
  if(e.key==='Escape'){ qPanel.classList.remove('show'); stopVoice(); autoMode=false; vAuto.classList.remove('on'); }
});

let tx=0;
document.addEventListener('touchstart',e=>tx=e.touches[0].clientX,{passive:true});
document.addEventListener('touchend',e=>{const dx=e.changedTouches[0].clientX-tx;if(Math.abs(dx)>55) go(dx<0?cur+1:cur-1);},{passive:true});

// ── Init ──────────────────────────────────────────────────
go(0);
setTimeout(()=>document.getElementById('hint').style.opacity='0',5000);
</script>
</body>
</html>





